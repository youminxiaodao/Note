## 原理

![image-20210226151433731](../images/image-20210226151433731.png)

![image-20210226151509523](../images/image-20210226151509523.png)



## CopyOnWriteArrayList中迭代器弱一致性

所谓弱一致性是指返回迭代器后，其它线程对list的增删改对迭代器是不可见的，代码如下:

![image-20210226155807855](../images/image-20210226155807855.png)

![image-20210226155839521](../images/image-20210226155839521.png)

![image-20210226155906397](../images/image-20210226155906397.png)



